!function(t){"use strict";function e(){function e(e,n,o,a,i){function c(t){function n(){return m()||d(r.cart)}function c(){var t=i({name:r.processor,config:x[r.environment]});return t}function d(t){var e=new a({id:g(),created:new Date,modified:new Date,configuration:t});return e}function g(){for(var t="01234ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz56789",e=21,n="pb",r=0;e>r;r++){var o=Math.floor(Math.random()*t.length);n+=t.substring(o,o+1)}return n+(new Date).toString().replace(/\s/g,"").replace(/:/g,"").replace(/-/g,"")}function f(t){var n={},r={};return t?(n={id:t.id(),created:t.created(),modified:t.modified(),configuration:t.configuration(),discount:t.discount(),items:[]},u(t.item.list.get(),function(t,e){r={id:t.id(),icon:t.icon(),name:t.name(),description:t.description(),price:t.price(),tax:t.tax(),taxable:t.taxable(),currency:t.currency(),quantity:t.quantity(),weight:t.weight(),discount:t.discount()},n.items.push(r)})):e.error("paperbag.prepareCartForStorage cart is undefined!"),n}function l(t){var n;return t?(n=new a({id:t.id,created:t.created,modified:t.modified,configuration:t.configuration,discount:t.discount}),u(t.items,function(t,e){n.item.add(t,t.quantity)})):e.error("createCartFromStorage error, cartFromStorage undefined!"),n}function m(){var t,n;return o.localStorage?o.localStorage.paperbag?(n=p(o.localStorage.getItem("paperbag")),t=l(n)):e.warn("paperbag.getSavedCartsFromStorage window.localStorage.paperbag do not exists!"):e.warn("paperbag.getSavedCartsFromStorage window.localStorage!"),t}function v(t){var n;t?(n=f(t),o.localStorage?o.localStorage.paperbag?o.localStorage.paperbag=s(n):o.localStorage.setItem("paperbag",s(n)):e.error("paperbag.saveCartToStorage window.localStorage not available!")):e.error("paperbag.saveCartToStorage cart is undefined!")}function b(){o.localStorage&&o.localStorage.paperbag?o.localStorage.removeItem("paperbag"):e.error(" removeCartFromStorage window.localStorage or window.localStorage.paperbag not available!")}var h=this,x=r.processors[r.processor];h.cart=n(),h.processor=c(),t.$on("pbEvent.item.update",function(t){h.cart&&v(h.cart)}),t.$on("pbEvent.item.remove",function(t){h.cart&&h.cart.item.list.count()>0?v(h.cart):(b(),h.cart=d(r.cart))}),t.$on("pbEvent.cart.destroy",function(t){b(),h.cart=d(r.cart)})}var u=t.forEach,s=t.toJson,p=t.fromJson;return new c(n)}function n(t){r=t}var r={};this.setConfiguration=n,this.$get=e,e.$inject=["$log","$rootScope","$window","pbCart","pbProcessor"]}t.module("paperbag",["paperbag.badge","paperbag.cart","paperbag.processor"]).provider("paperbag",e),e.$inject=[]}(angular),!function(t){"use strict";function e(t){function e(e,n,r){function o(){n.html(t.cart.item.list.quantity())}o(),e.$on("pbEvent.item.update",function(t){o()}),e.$on("pbEvent.item.remove",function(t){o()}),e.$on("pbEvent.cart.destroy",function(t){o()})}var n={restrict:"AE",scope:{},link:e};return n}t.module("paperbag.badge",[]).directive("pbBadge",e),e.$inject=["paperbag"]}(angular),!function(t){"use strict";function e(e,n,r,o){function a(t){function r(t){return 1!==arguments.length?C:void(C=t)}function a(t){return 1!==arguments.length?j:void(j=t)}function s(t){return 1!==arguments.length?T:void(T=t)}function p(t){return 1!==arguments.length?k:void(k=t)}function d(t){return 1!==arguments.length?I:(I=t,void n.$broadcast("pbEvent.item.update"))}function g(t){var e=0;return I.type===D.constants.discount.dollar?e=t-parseFloat(I.amount):I.type===D.constants.discount.percent&&(e=t-t*parseFloat(I.amount)),e}function f(){var t=0;return c(P,function(e,n){t+=e.subtotal()}),I&&I.amount&&I.type&&(t=g(t)),t}function l(){var t=0;return k&&k.shipping&&k.shipping.rate,t}function m(){var t=0,n=0;return k&&k.taxes&&k.taxes.length>0?(c(P,function(t,e){(void 0===t.taxable()||t.taxable())&&(n+=t.subtotal())}),n=g(n),c(k.taxes,function(e,r){t+=n*(.01*parseFloat(e.rate))})):e.error("cart.getTaxes could not find tax rates from configuration!"),t}function v(){var t=0;return c(P,function(e,n){e.tax&&(t+=e.tax())}),t}function b(){var t=0;return t+=f(),t+=l(),t+=m(),t+=v()}function h(){C="",j="",T="",k={},P=[],n.$broadcast("pbEvent.cart.destroy")}function x(t){var n;return void 0!==t?n=i(P,function(e,n,r){return e.id()===t?e:void 0},!0):e.error("cart.get id not found!"),n}function y(t){var n;return void 0!==C?n=i(P,function(e,n,r){return e.id()===t.id()&&e.name()===t.name()&&e.description()===t.description()&&e.price()===t.price()&&e.tax()===t.tax()&&e.taxable()===t.taxable()&&e.currency()===t.currency()&&e.quantity()===t.quantity()&&e.weight()===t.weight()?e:void 0},!0):e.error("cart.get id not found!"),n}function S(t,r){var a;if(t&&r){if(a=D.item.get(t.id)[0],void 0!==a)a.increaseQty(r);else if((!r||0>=r)&&(r=1),k&&k.currency){var i=new o({id:t.id,icon:t.icon,name:t.name,description:t.description,taxable:t.taxable,price:t.price,tax:t.tax,currency:k.currency,quantity:r,weight:t.weight,discount:t.discount});P.push(i)}else e.error("cart.item.add could not find currency from configuration!");n.$broadcast("pbEvent.item.update")}else e.error("cart.item.add item or quantity is undefined!")}function $(t){var r,o=-1;void 0!==t?(r=D.item.get(t)[0],r&&(o=P.indexOf(r),P.splice(o,1),n.$broadcast("pbEvent.item.remove"))):e.warn("cart.item.remove id is undefined!")}function w(t){t.forEach(function(t,e){S(t,1)})}function F(){return P}function E(){return P.length}function q(){var t=0;return c(P,function(e,n){t+=e.quantity()}),t}var C="",j="",T="",k={},I={amount:"",type:1},P=[],D=this;D.constants={discount:{dollar:1,percent:2}},D.id=r,D.created=a,D.modified=s,D.configuration=p,D.discount=d,D.subtotal=f,D.shipping=l,D.tax=m,D.otherTax=v,D.total=b,D.destroy=h,D.item={get:x,equals:y,add:S,remove:$,list:{set:w,get:F,count:E,quantity:q}},arguments.length>0&&u(t)?t&&t.configuration?(C=t.id,j=t.created,T=t.modified,k=t.configuration,I=t.discount):e.error("cart.constructor no cart configuration found!"):e.error("cart.constructor parameters do not exist or are not correct type!")}var i=r("filter"),c=t.forEach,u=t.isObject;return a}t.module("paperbag.cart",["paperbag.item"]).factory("pbCart",e),e.$inject=["$log","$rootScope","$filter","pbItem"]}(angular),!function(t){"use strict";function e(e,n){function r(t){function r(t){return 1!==arguments.length?S:void(S=t)}function i(t){return 1!==arguments.length?$:void($=t)}function c(t){return 1!==arguments.length?w:void(w=t)}function u(t){return 1!==arguments.length?F:void(F=t)}function s(t){return 1!==arguments.length?E:void(E=t)}function p(t){return 1!==arguments.length?q:void(q=t)}function d(t){return 1!==arguments.length?C:void(C=t)}function g(t){return 1!==arguments.length?j:void(j=t)}function f(t){return 1===arguments.length&&t>0?(T=t,void n.$broadcast("pbEvent.item.update")):T}function l(t){return 1!==arguments.length?k:void(k=t)}function m(t){return 1!==arguments.length?I:(I=t,void n.$broadcast("pbEvent.item.update"))}function v(){var t=0;return E&&T?(t=parseFloat(E)*T,I&&I.amount&&I.type&&(I.type===P.constants.discount.dollar?t-=parseFloat(I.amount):I.type===P.discount.percent&&(t-=t*parseFloat(I.amount)))):e.error("item.getSubtotal price or quantity is undefined!"),t}function b(){var t=0;return q&&q.length>0&&a(q,function(e,n){t+=v()*(.01*parseFloat(e.rate))}),t}function h(){var t=0;return t+=v(),t+=b()}function x(t){T+=1===arguments.length&&t>0?t:1,n.$broadcast("pbEvent.item.update")}function y(t){T-=1===arguments.length&&t>0?t:1,n.$broadcast("pbEvent.item.update")}var S="",$="",w="",F="",E="",q=[],C=!0,j="",T=0,k=0,I={amount:"",type:1},P=this;P.constants={discount:{dollar:1,percent:2}},P.id=r,P.icon=i,P.name=c,P.description=u,P.price=s,P.taxes=p,P.taxable=d,P.currency=g,P.quantity=f,P.weight=l,P.discount=m,P.subtotal=v,P.tax=b,P.total=h,P.increaseQty=x,P.decreaseQty=y,arguments.length>0&&o(t)?(S=t.id,$=t.icon,w=t.name,F=t.description,E=t.price,q=t.taxes,C=t.taxable,j=t.currency,T=t.quantity,k=t.weight,I=t.discount):e.error("item.constructor parameter do not exist or are not correct type!")}var o=t.isObject,a=t.forEach;return r}t.module("paperbag.item",[]).factory("pbItem",e),e.$inject=["$log","$rootScope"]}(angular),!function(t){"use strict";function e(t,e){function n(t){var e=r[t.name];return new e(t.config)}var r={paypal:t,stripe:e};return n}t.module("paperbag.processor",["paperbag.processor.paypal","paperbag.processor.stripe"]).factory("pbProcessor",e),e.$inject=["pbpPaypal","pbpStripe"]}(angular),!function(t){"use strict";function e(e){function n(t){function n(t){var n={id:t.id(),subtotal:t.subtotal().toFixed(2),taxes:(t.tax()+t.otherTax()).toFixed(2),shipping:t.shipping().toFixed(2),total:t.total().toFixed(2),items:[],urls:i.config.redirects};return r(t.item.list.get(),function(t,e){var t={quantity:t.quantity(),name:t.name(),price:t.price(),currency:t.currency(),sku:t.id(),tax:t.tax().toFixed(2)};n.items.push(t)}),e.post(i.config.endpoints.checkout,n)}function o(t){var n={id:t.id(),subtotal:t.subtotal().toFixed(2),taxes:(t.tax()+t.otherTax()).toFixed(2),shipping:t.shipping().toFixed(2),total:t.total().toFixed(2),items:[],instruments:t.instruments};return r(t.item.list.get(),function(t,e){var t={quantity:t.quantity(),name:t.name(),price:t.price(),currency:t.currency(),sku:t.id(),tax:t.tax().toFixed(2)};n.items.push(t)}),e.post(i.config.endpoints.credit,n)}function a(t){return e.post(i.config.endpoints.execute,t)}var i=this;i.config=t,i.checkout=n,i.credit=o,i.execute=a}var r=t.forEach;return n}t.module("paperbag.processor.paypal",[]).factory("pbpPaypal",e),e.$inject=["$http"]}(angular),!function(t){"use strict";function e(t){function e(t){function e(t){var e={id:t.id(),subtotal:t.subtotal().toFixed(2),taxes:(t.tax()+t.otherTax()).toFixed(2),shipping:t.shipping().toFixed(2),total:t.total().toFixed(2),items:[],urls:r.config.redirects};return e}function n(t){return t}var r=this;r.config=t,r.checkout=e,r.execute=n}return e}t.module("paperbag.processor.stripe",[]).factory("pbpStripe",e),e.$inject=["$http"]}(angular);